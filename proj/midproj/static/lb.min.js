var Lb=function(a){this.lbBox=document.getElementById(a.id);this.lbItems=this.lbBox.querySelectorAll(".lb-item");this.lbSigns=this.lbBox.querySelectorAll(".lb-sign li");this.lbCtrlL=this.lbBox.querySelectorAll(".lb-ctrl")[0];this.lbCtrlR=this.lbBox.querySelectorAll(".lb-ctrl")[1];this.curIndex=0;this.numItems=this.lbItems.length;this.status=!0;this.speed=a.speed||600;this.delay=a.delay||3E3;this.direction=a.direction||"left";this.moniterKeyEvent=a.moniterKeyEvent||!1;this.moniterTouchEvent=a.moniterTouchEvent||
!1;this.handleEvents();this.setTransition()};Lb.prototype.start=function(){var a={srcElement:"left"==this.direction?this.lbCtrlR:this.lbCtrlL},b=this.clickCtrl.bind(this);this.interval=setInterval(b,this.delay,a)};Lb.prototype.pause=function(){clearInterval(this.interval)};Lb.prototype.setTransition=function(){var a=document.createElement("style");document.head.appendChild(a);a.sheet.insertRule(".lb-item {transition: left "+this.speed+"ms ease-in-out}",0)};
Lb.prototype.clickCtrl=function(a){if(this.status){this.status=!1;if(a.srcElement==this.lbCtrlR){a=this.curIndex;var b=(this.curIndex+1)%this.numItems,c="left"}else a=this.curIndex,b=(this.curIndex+this.numItems-1)%this.numItems,c="right";this.slide(a,b,c);this.curIndex=b}};Lb.prototype.clickSign=function(a){if(this.status){this.status=!1;var b=this.curIndex;a=parseInt(a.srcElement.getAttribute("slide-to"));this.slide(b,a,b<a?"left":"right");this.curIndex=a}};
Lb.prototype.touchScreen=function(a){if("touchstart"==a.type)this.startX=a.touches[0].pageX,this.startY=a.touches[0].pageY;else{this.endX=a.changedTouches[0].pageX;this.endY=a.changedTouches[0].pageY;a=this.endX-this.startX;var b=this.startY-this.endY,c=Math.abs(180*Math.atan2(b,a)/Math.PI);10>Math.abs(a)||10>Math.abs(b)||(0<=c&&45>=c?this.lbCtrlL.click():135<=c&&180>=c&&this.lbCtrlR.click())}};Lb.prototype.keyDown=function(a){a&&37==a.keyCode?this.lbCtrlL.click():a&&39==a.keyCode&&this.lbCtrlR.click()};
Lb.prototype.handleEvents=function(){this.lbBox.addEventListener("mouseleave",this.start.bind(this));this.lbBox.addEventListener("mouseover",this.pause.bind(this));this.lbCtrlL.addEventListener("click",this.clickCtrl.bind(this));this.lbCtrlR.addEventListener("click",this.clickCtrl.bind(this));for(var a=0;a<this.lbSigns.length;a++)this.lbSigns[a].setAttribute("slide-to",a),this.lbSigns[a].addEventListener("click",this.clickSign.bind(this));this.moniterKeyEvent&&document.addEventListener("keydown",
this.keyDown.bind(this));this.moniterTouchEvent&&(this.lbBox.addEventListener("touchstart",this.touchScreen.bind(this)),this.lbBox.addEventListener("touchend",this.touchScreen.bind(this)))};
Lb.prototype.slide=function(a,b,c){var d=this;if("left"==c){this.lbItems[b].className="lb-item next";var e="lb-item active left",f="lb-item next left"}else this.lbItems[b].className="lb-item prev",e="lb-item active right",f="lb-item prev right";this.lbSigns[a].className="";this.lbSigns[b].className="active";setTimeout(function(){d.lbItems[a].className=e;d.lbItems[b].className=f}.bind(this),50);setTimeout(function(){d.lbItems[a].className="lb-item";d.lbItems[b].className="lb-item active";d.status=
!0}.bind(this),this.speed+50)};window.onload=function(){(new Lb({id:"lb-1",speed:600,delay:3E3,direction:"left",moniterKeyEvent:!0,moniterTouchEvent:!0})).start()};